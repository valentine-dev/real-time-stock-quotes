{"version":3,"sources":["display.js","input.js","index.js"],"names":["Display","data","this","props","Table","striped","bordered","hover","responsive","size","rows","Component","DisplayHeader","class","DisplayBody","map","row","index","dateStr","Date","regularMarketTime","raw","toLocaleDateString","month","day","timeStr","toLocaleTimeString","hour12","changePercent","regularMarketChangePercent","fmt","change","regularMarketChange","textColor","colonIndex","symbol","indexOf","price","regularMarketPrice","volume","regularMarketVolume","symColor","slice","toLowerCase","symbolString","currency","key","fullExchangeName","GetQuote","getQuote","state","startsWith","axios","get","then","res","quotes","quoteResponse","result","length","message","longName","setState","handleSubmit","catch","err","response","includes","status","name","handleInputChange","event","target","value","trim","errorMessage","disableGet","undefined","displayError","displayMessage","Container","Form","autoComplete","onSubmit","e","preventDefault","Group","as","Row","Col","xs","Control","type","autoCorrect","autoCapitalize","onChange","placeholder","Button","onClick","disabled","Alert","variant","require","config","App","quote","latestQuotes","Navbar","bg","sticky","expand","Brand","href","Toggle","aria-controls","Collapse","id","Nav","className","Link","title","Heading","token","process","Notes","useState","show","setShow","dismissible","onClose","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.410ad3ed.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport Table from 'react-bootstrap/Table';\r\n\r\nclass Display extends Component {\r\n   render() {\r\n      const { data } = this.props;\r\n      return (\r\n         <Table striped bordered hover responsive=\"sm\" size=\"sm\">\r\n            <DisplayHeader />\r\n            <DisplayBody rows={data} />\r\n         </Table>\r\n      )\r\n   }\r\n}\r\n\r\nconst DisplayHeader = () => {\r\n   return (\r\n      <thead>\r\n         <tr class=\"text-right\">\r\n            <th class=\"text-left\">Time</th>\r\n            <th>Symbol (Exchange)</th>\r\n            <th>$ (Volume)</th>\r\n            <th>Change (%)</th>\r\n         </tr>\r\n      </thead>\r\n   )\r\n};\r\n\r\nconst DisplayBody = props => {\r\n   const rows = props.rows.map((row, index) => {\r\n\r\n      const dateOptions = { month: 'numeric', day: 'numeric' };\r\n      const dateStr = new Date(row.regularMarketTime.raw*1000).toLocaleDateString('en-CA', dateOptions);\r\n      const timeOptions = { hour12: false };\r\n      const timeStr = new Date(row.regularMarketTime.raw*1000).toLocaleTimeString('en-CA', timeOptions);\r\n      const changePercent = row.regularMarketChangePercent.fmt;\r\n      const change = row.regularMarketChange.fmt;\r\n      const textColor = row.regularMarketChange.raw === 0 ? \"text-dark\"\r\n         : (row.regularMarketChange.raw > 0 ? \"text-success\" : \"text-danger\");\r\n      const colonIndex = row.symbol.indexOf('.');\r\n      const price = row.regularMarketPrice.fmt;\r\n      const volume = row.regularMarketVolume.fmt;\r\n\r\n      const symColor = colonIndex > -1 ? \r\n         (row.symbol.slice(colonIndex+1).toLowerCase() === 'to' ? \"text-primary\" \r\n         : (row.symbol.slice(colonIndex+1).toLowerCase() === 'cn' ? \"text-secondary\" : \"text-dark\"))\r\n         : \"text-success\";\r\n\r\n      const symbolString = colonIndex > -1 ? row.symbol.slice(0,colonIndex) : row.symbol;\r\n      const currency = row.currency;\r\n      return (\r\n\r\n         <tr key={index} class=\"text-right\">\r\n            <td class=\"text-left\">{dateStr} {timeStr}</td>\r\n            <td class={symColor}>{symbolString} ({row.fullExchangeName})</td>\r\n            <td>{currency} <span class=\"font-weight-bold\">{price}</span> ({volume})</td>\r\n            <td class={textColor}>{change} ({changePercent})</td>\r\n         </tr >\r\n      )\r\n   });\r\n\r\n   return <tbody>{rows}</tbody>\r\n};\r\n\r\n\r\n\r\nexport default Display;\r\n","import React, { Component } from 'react';\r\nimport Container from 'react-bootstrap/Container';\r\nimport Alert from 'react-bootstrap/Alert';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Form from 'react-bootstrap/Form';\r\nimport Col from 'react-bootstrap/Col';\r\nimport Row from 'react-bootstrap/Row';\r\nimport axios from 'axios';\r\n\r\nclass GetQuote extends Component {\r\n   constructor(props) {\r\n      super(props);\r\n      this.state = { symbol: null, errorMessage: null, message: null }\r\n   }\r\n\r\n   getQuote = () => {\r\n      const symbol = this.state.symbol.toLowerCase().startsWith(\"t.\") ? this.state.symbol.slice(2) + \".to\"\r\n         : (this.state.symbol.toLowerCase().startsWith(\"c.\") ? this.state.symbol.slice(2) + \".cn\" \r\n         : (this.state.symbol.toLowerCase().startsWith(\"v.\") ? this.state.symbol.slice(2) + \".v\" : this.state.symbol));\r\n      axios.get('https://cors-anywhere.herokuapp.com/https://query1.finance.yahoo.com/v7/finance/quote?formatted=true&symbols=' + symbol)\r\n         .then(res => {\r\n            //console.log(res);\r\n            const quotes = res.data.quoteResponse.result;\r\n            //console.log(quote);\r\n            if (quotes && quotes.length >  0) {\r\n               //console.log(\"Got last price ... \");\r\n               const message = quotes[0].longName + ' on ' + quotes[0].fullExchangeName;\r\n               this.setState({ ...this.state, \"errorMessage\": null, 'message': message });\r\n               this.props.handleSubmit(quotes[0]);\r\n            } else {\r\n               this.setState({ ...this.state, \"errorMessage\": \"There is no data for this symbol.\" });\r\n            }\r\n         })\r\n         .catch(err => {\r\n            //console.log(err);\r\n            if (err.response) {\r\n               // The request was made and the server responded with a status code\r\n               // that falls out of the range of 2xx\r\n               //console.log(err.response.data);\r\n               //console.log(err.response.status);\r\n               //console.log(err.response.headers);\r\n               let message;\r\n               if (typeof err.response.data === 'string') {\r\n                  message = err.response.data.includes('Cannot GET /quote') ? 'The API backend is not available. Please have a check.' : 'HTTP ' + err.response.status + ': ' + err.response.data;\r\n               } else if (typeof err.response.data === 'object') {\r\n                  message = err.response.data.name + \": \" + err.response.data.message;\r\n               } else {\r\n                  message = \"Oops, something went wrong!\";\r\n               }\r\n               this.setState({ ...this.state, \"errorMessage\": message });\r\n            } else {\r\n               this.setState({ ...this.state, \"errorMessage\": \"Oops, something went wrong!\" });\r\n            }\r\n\r\n         });\r\n   }\r\n\r\n   handleInputChange = (event) => {\r\n      this.setState({ ...this.state, \"symbol\": event.target.value.trim(), \"errorMessage\": null, \"message\": null });\r\n   }\r\n\r\n   render() {\r\n\r\n      let disableGet = true;\r\n      if (this.state.symbol !== undefined && this.state.symbol !== null && this.state.symbol.length > 0) {\r\n         disableGet = false;\r\n      }\r\n\r\n      const displayError = this.state.errorMessage === null ? false : true;\r\n      const displayMessage = this.state.message === null ? false : true;\r\n      return (\r\n         <Container>\r\n            <Form autoComplete=\"on\" onSubmit={e => e.preventDefault()} >\r\n               <Form.Group as={Row} >\r\n                  <Col xs=\"9\">\r\n                     <Form.Control type=\"text\" autoCorrect=\"off\" autoCapitalize=\"off\" onChange={this.handleInputChange} placeholder=\"a, t.h, c.j, or v.c\" />\r\n                  </Col>\r\n                  {disableGet ? <Col xs=\"2\"><Button onClick={this.getQuote} disabled>GO</Button></Col> \r\n                     : <Col xs=\"2\"><Button onClick={this.getQuote}>GO</Button></Col>\r\n                  }\r\n               </Form.Group>\r\n            </Form>\r\n            {displayMessage ? <Alert variant='info'>{this.state.message}</Alert> : null}\r\n            {displayError ? <Alert variant='warning'>{this.state.errorMessage}</Alert> : null}\r\n         </Container>\r\n      )\r\n   }\r\n}\r\nexport default GetQuote;\r\n","import React, { useState, Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport Display from './display';\r\nimport GetQuote from './input';\r\nimport Container from 'react-bootstrap/Container';\r\nimport Alert from 'react-bootstrap/Alert';\r\nimport Navbar from 'react-bootstrap/Navbar';\r\nimport Nav from 'react-bootstrap/Nav';\r\n\r\nrequire('dotenv').config();\r\n\r\nclass App extends Component {\r\n   constructor(props) {\r\n      super(props);\r\n      this.state = { latestQuotes: [] }\r\n   }\r\n\r\n   getQuote = quote => {\r\n      this.setState({ latestQuotes: [quote, ...this.state.latestQuotes] });\r\n   }\r\n\r\n   render() {\r\n\r\n      return (\r\n         <Container>\r\n            <Navbar bg=\"dark\" variant=\"dark\" sticky=\"top\" expand=\"sm\">\r\n               <Navbar.Brand href=\"https://enjoyit.ca\">\r\n                  {'enjoyit.ca'}\r\n               </Navbar.Brand>\r\n               <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\r\n               <Navbar.Collapse id=\"basic-navbar-nav\">\r\n               <Nav className=\"mr-auto\">\r\n               <Nav.Link href=\"mailto:feedback@enjoyit.ca\" title=\"provide feedback to feedback@enjoyit.ca\">Feedback</Nav.Link>\r\n               <Nav.Link href=\"mailto:donations@enjoyit.ca\" title=\"eTransfer less than $10 to donations@enjoyit.ca\">Donations</Nav.Link>\r\n               </Nav>\r\n               </Navbar.Collapse>\r\n            </Navbar>\r\n            <Alert variant=\"success\">\r\n               <Alert.Heading>FREE Real-Time Quotes for North American Stocks</Alert.Heading>\r\n               <p>\r\n                  For non-common stocks, Yahoo! Finance convention is used.\r\n               </p>\r\n            </Alert>\r\n            <Notes />\r\n            <GetQuote handleSubmit={this.getQuote} token={process.env.REACT_APP_TOKEN} />\r\n            {this.state.latestQuotes.length > 0 ? <Display data={this.state.latestQuotes} /> : null}\r\n         </Container>\r\n      );\r\n   }\r\n}\r\n\r\nconst Notes = () => {\r\n   const [show, setShow] = useState(true);\r\n\r\n   if (show) {\r\n      const rows = \r\n         [\r\n            ['success','US exchanges','just enter the stock symbol.'],\r\n            ['primary','Toronto Stock Exchange','prepend ', 't.', 't.h'],\r\n            ['dark','TSX Venture Exchange','prepend ','v.', 'v.c'],\r\n            ['secondary','Canadian Securities Exchange','prepend ', 'c.', 'c.j']\r\n         ].map((row, index) => {\r\n            return (\r\n               <Alert variant={row[0]} dismissible onClose={() => setShow(false)}>\r\n                   For {row[1]}, {row[2]}\r\n                   {row.length > 3 ? <><code>{row[3]}</code>{' like '}<code>{row[4]}</code></> : null}\r\n               </Alert>\r\n            )\r\n         });\r\n      return (\r\n         <>{rows}</>\r\n      )\r\n   }\r\n   return <></>;\r\n};\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n"],"sourceRoot":""}